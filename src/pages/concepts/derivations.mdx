---
title: Derivations
snippet: Build instructions for packages.
related: ["nix-store", "packages", "realization"]
readMore: [
  {
    title: "Derivations (from Ian Henry's How to Learn Nix)",
    href: "https://ianthehenry.com/posts/how-to-learn-nix/derivations/"
  }
]
---

In Nix, a **derivation** is an instruction

<Success title="Mental models">
You may find it helpful to think of derivations as a plan or blueprint for a package written in the Nix language.
</Success>

For building a Nix [package](/concepts/packages) and...

## Derivations in the Nix language \{#nix-language}

In the [Nix language][lang], derivations are created using the [`derivation`][func] function.
Here's the type signature for `derivation` expressed as a [Haskell]-ish signature:[^1]

```haskell
derivation ::
    { system   : String
    , name     : String
    , builder  : Path | Derivation
    , ?args    : [String]
    , ?outputs : [String]
    } -> Derivation
```

Here's an example derivation:

```nix
derivation {
  name = "hello-text";
  system = "x86_64-linux"; # The system on which...
  builder = "bash";
  args = ["-c", "mkdir $out && echo Hello world > $out/hello.txt"]
};
```

Here is a thing:

<NixStorePath pkg="hello" client:load />

### String interpolation

If Nix sees this string

```nix
buildPhase = ''
  mv ${pkgs.website}/favicon.ico
'';
```

The string output of a derivation is always a [Nix store path][store]

## Realization



### Special variables

There are two special variables to be aware of when writing derivations:

* `$out` represents the root of the directory structure for build output.
* `$src` represents the build sources.

## The standard environment \{#standard-env}

[`stdenv.mkDerivation`][mk]

While you *can* create derivations using the raw `derivation` function, it's far more common to use a wrapper function around it.
Perhaps the most commonly used wrapper function is [`stdenv.mkDerivation`][mk].
Arguments:

* The `name` of the package. If you specify `pname` and `version` instead, the `name` ends up `${pname}-${version}`.


Outside of `stdenv.mkDerivation`, there are many custom derivation wrappers for specific languages, frameworks, and more (and many of those actually wrap `stdenv.mkDerivation`).
Some examples:

* [`buildGoModule`][go] for [Go]
* [`buildRustPackage`][buildrustpackage] for [Rust]
* [`buildPythonPackage`][buildpythonpackage] for [Python]
* [`buildNodePackage`][buildnodepackage] for [Node.js][node]

[^1]: Kudos to [Ian Henry][ian] for this idea.

[buildgomodule]: TODO
[buildnodepackage]: TODO
[buildpythonpackage]: TODO
[buildrustpackage]: TODO
[func]: TODO
[go]: https://go.dev
[haskell]: https://www.haskell.org
[ian]: https://ianthehenry.com/
[lang]: /concepts/nix-language
[mk]: https://nixos.org/manual/nixpkgs/stable/#sec-using-stdenv
[nixpkgs]: /concepts/nixpkgs
[node]: https://nodejs.org
[python]: TODO
[rust]: https://rust-lang.org
[store]: /concepts/nix-store
