---
title: Flakes
snippet: |
  An experimental yet nonetheless recommended system for referencing and sharing [Nix code](/concepts/nix-language) and Nix artifacts like [packages](/concepts/packages)
related: ["channels"]
externalSources: [
  {
    title: "Flakes",
    href: "https://nixos.wiki/wiki/Flakes",
    source: {
      title: "The NixOS wiki",
      href: "https://nixos.wiki"
    }
  },
  {
    title: "Practical Nix flakes",
    href: "https://serokell.io/blog/practical-nix-flakes",
    source: {
      title: "The Serokell blog",
      href: "https://serokell.io/blog"
    }
  },
  {
    title: "Nix flakes: an introduction",
    href: "https://xeiaso.net/blog/nix-flakes-1-2022-02-21",
    source: {
      title: "Xe Iaso's blog",
      href: "https://xeiaso.net/blog"
    }
  }
]
---

Nix *flakes* are a way of organizing and referring to Nix code that's pretty awesome. We think they're better than [channels](/concepts/channels).

Flakes take [flake inputs](/concepts/flake-inputs), such as [Nixpkgs](/concepts/nixpkgs), and provide [flake outputs](/concepts/flake-outputs) that other flakes can consume.

## Flake references \{#references}

**INSERT A SNAPPY WAY OF EXPLAINING FLAKE REFERENCES HERE**

## Flake inputs \{#inputs}

*Flake inputs* are a set of dependencies that a flake needs to be built.
Each input in the set can be pulled from various sources, such as github, generic git repositories, and even your filesystem.

Furthermore, inputs can modify each other's inputs to make sure that,
for example, multiple dependencies all rely on the same version of nixpkgs.
This is done via the `inputs.<input>.follows` attribute.

```nix filename=flake.nix
{
  inputs = {
    nixpkgs = "github:NixOS/nixpkgs";
  };
}
```

You can find a full breakdown of the flake input schema in the [Nix manual][manual].


## Flake outputs \{#outputs}

*Flake outputs* are what a flake produces as part of its build.
Each flake can have many different outputs simultaneously, including but not limited to, application [packages], system configuration, [Hydra] build jobs (CI), and [development environments][env].

Flake outputs are defined by a function, which takes an attribute set as input, containing each of the inputs to that flake (named after the chosen identifier in the [inputs](#inputs) section).

The flake output below, for example, produces a single package output on `x86_64-linux` systems for the `cowsay` derivation.

```nix filename=flake.nix
{
  outputs = { self, nixpkgs }:
  let system = x86_64-linux;
  in
  {
    packages."${system}".default = (import nixpkgs { inherit system; }).cowsay;
  };
}
```

## Flake templates

Flake *templates* are a feature of Nix that enables you to either initialize a new project or add files to an existing project.

You can initialize a flake template using the [`nix flake init`][init] command.

[env]: /concepts/dev-env
[hydra]: https://github.com/NixOS/hydra
[init]: https://nixos.org/manual/nix/stable/command-ref/new-cli/nix3-flake-init
[manual]: https://nixos.org/manual/nix/stable/command-ref/new-cli/nix3-flake#flake-inputs
[packages]: /concepts/packages
